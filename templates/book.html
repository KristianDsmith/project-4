{% extends "base.html" %}

{% block title %}Book a Table{% endblock %}

{% block content %}
<h2>Book a Table</h2>
<form method="post">
    {% csrf_token %}
    <label for="name">Name:</label>
    <input type="text" name="name" required><br>

    <label for="email">Email:</label>
    <input type="email" name="email" required><br>

    <label for="phone">Phone:</label>
    <input type="text" name="phone" required><br>

    <label for="date">Date:</label>
    <input type="date" name="date" required><br>

    <label for="time">Time:</label>
    <input type="time" name="time" required><br>

    <label for="number_of_guests">Number of Guests:</label>
    <input type="number" name="number_of_guests" required><br>

    <label for="table">Table:</label>
    <select name="table" required>
        {% for table in operating_hours %}
        <option value="{{ table.table.id }}">
            {{ table }}
        </option>
        {% endfor %}
    </select><br>

    <input type="submit" value="Book Now">
</form>

<!-- Display Restaurant Operating Hours -->
<h2>Restaurant Operating Hours</h2>
<table>
    <tr>
        <th>Day</th>
        <th>Opening Time</th>
        <th>Closing Time</th>
    </tr>
    {% for hour in operating_hours %}
    <tr>
        <td>{{ hour.get_day_display }}</td>
        <td>{{ hour.opening_time|time }}</td>
        <td>{{ hour.closing_time|time }}</td>
    </tr>
    {% endfor %}
</table>

<!-- Display Table Availability -->
<h2>Table Availability</h2>
{% for table in operating_hours %}
<h3>Table {{ table.table_number }}</h3>
<table>
    <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
    </tr>
    {% for reservation in all_reservations %}
    {% if reservation.table == table.table_number %}
    <tr>
        <td>{{ reservation.date }}</td>
        <td>{{ reservation.time }}</td>
        <td>{% if reservation.is_available %}Available{% else %}Not Available{% endif %}</td>
    </tr>
    {% endif %}
    {% endfor %}
</table>
{% endfor %}

{% endblock %}