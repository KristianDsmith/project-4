<!-- templates/tasks/task_detail.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Detail</title>
</head>
<body>
    <h1>Task Detail</h1>
    <p>Task ID: {{ task.id }}</p>
    <p>Title: {{ task.title }}</p>
    <p>Description: {{ task.description }}</p>
    <p>Reservation: {% if task.reservation %}{{ task.reservation.id }}{% else %}N/A{% endif %}</p>
    
    {% if task.reservation %}
        <p>Reservation Status: {{ task.reservation.get_status_display }}</p>
        
        {% if task.reservation.status == 'PD' %}  <!-- Display the form only for pending reservations -->
            <form action="{% url 'task_update' task.id %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="confirm_booking">
                <button type="submit">Confirm Booking</button>
            </form>
        {% else %}
            <p>Booking already {{ task.reservation.get_status_display }}</p>
        {% endif %}
    {% else %}
        <p>No reservation associated with this task.</p>
    {% endif %}
    
    <p><a href="{% url 'staff_tasks' %}">Back to Assigned Tasks</a></p>

    <!-- Display success message if it exists -->
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
</body>
</html>

